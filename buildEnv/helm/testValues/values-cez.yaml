
serviceaccount: webhook-instrumentor
deploymentName: webhook-server
webhookName: webhook-appd
# namespacesEnabled is optional list of namespaces, where webhook would be applied. 
# If missing, all namespaces will be enabled, except kubernetes system namespaces
# namespacesEnabled:
# - cprdigital-col-test
#
# namespacesDisabled is optional list of namespaces, where webhook would not be applied. 
# If missing, all namespaces will be enabled, except kubernetes system namespaces 
# (and namespace where the webook itself is running)
# namespacesDisabled:
# - ns3
#
# enabledForPodsWithLabels is optional safety belt to try to instrument only pods
# having set labels to a specific values
# enabledForPodsWithLabels:
#   appdInstr: do
#
certValidityDays: 1024
# failure policy can be Fail or Ignore. 
# Ignore is safer - should the webhook fail or be unresponsive for timeoutSeconds, pod gets created unchanged
timeoutSeconds: 2
failurePolicy: Ignore
# number of replicas for webhook server
replicas: 1

# optional - certs information. If missing, certs will be generated dynamically
# certs:
#   tlsCert:
#   tlsKey:
#   caCert:

# optional - useServiceCAonOCP: true - if set, on OpenShift, Service CA certificates will be used
useServiceCAonOCP: true

# service type and port for webhook server
service:
  type: ClusterIP
  port: 443

image:
  image: central-docker-release.artif.cc.corp/chrlic/appd-webhook-instrumentor:v1.0.2
  pullPolicy: Always

appdController:
  host: cezas-pov.saas.appdynamics.com
  port: "443"
  isSecure: true
  accountName: cezas-pov
  accessKey: "08odjfkvf1fq"
  useProxy: true
  proxyHost: phdproxy4.cezdata.corp
  proxyPort: "8080"

instrumentationTemplates:
  - name: Java_Default
    injectionRules:
      technology: java
      image: central-docker-release.artif.cc.corp/appdynamics/java-agent:22.5.0
      javaEnvVar: JAVA_TOOL_OPTIONS
      applicationNameSource: label
      applicationNameLabel: appdapp
      tierNameSource: auto

instrumentationRules:
  - name: StandardJavaApp
    matchRules:
      labels:
      - appdapp: .*
      - appdtech: java
    injectionRules:
      template: Java_Default
      technology: java
      image: central-docker-release.artif.cc.corp/appdynamics/java-agent:22.5.0
      javaEnvVar: _JAVA_OPTIONS
